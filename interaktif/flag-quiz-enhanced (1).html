<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tebak Bendera Negara - Game Edukasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        /* Lobby Screen */
        .lobby-screen {
            background: white;
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
        }

        .lobby-screen h1 {
            font-size: 3.5rem;
            color: #667eea;
            margin-bottom: 20px;
        }

        .lobby-screen p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 40px;
        }

        .globe-icon {
            font-size: 6rem;
            animation: bounce 2s infinite;
            margin-bottom: 20px;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        .menu-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .menu-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .menu-btn.secondary {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            color: #667eea;
        }

        /* Settings Screen */
        .settings-screen, .about-screen {
            background: white;
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .settings-screen h2, .about-screen h2 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
        }

        .setting-item {
            background: #f0f4ff;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .setting-item h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .volume-slider {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #d1d5db;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .volume-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            min-width: 50px;
        }

        .back-btn {
            background: #e5e7eb;
            color: #374151;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .back-btn:hover {
            background: #d1d5db;
        }

        /* About Screen */
        .credits-box {
            background: #f0f4ff;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .credits-box h3 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .credits-box p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 10px;
        }

        /* Game Screen */
        .game-screen {
            background: white;
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-label {
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
        }

        /* Lives Display */
        .lives-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            font-size: 2rem;
        }

        .heart {
            transition: all 0.3s;
        }

        .heart.lost {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        .game-card {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .question-title {
            font-size: 2rem;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }

        .flag-display {
            margin: 30px 0;
            text-align: center;
        }

        .flag-image {
            width: 400px;
            height: 280px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 5px solid #f0f0f0;
            transition: transform 0.3s;
        }

        .flag-image:hover {
            transform: scale(1.05);
        }

        .region-badge {
            display: inline-block;
            background: #f0f4ff;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .option-btn {
            padding: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            color: #333;
        }

        .option-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
            color: white;
            transform: scale(1.05);
        }

        .option-btn.wrong {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
            color: white;
        }

        .option-btn.disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .feedback {
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 20px 0;
            animation: slideIn 0.3s ease-out;
            text-align: center;
        }

        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }

        .feedback.wrong {
            background: #fee2e2;
            color: #991b1b;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .next-btn {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .next-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .reset-btn {
            background: #e5e7eb;
            color: #374151;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #d1d5db;
        }

        /* Game Over Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal {
            background: white;
            border-radius: 30px;
            padding: 50px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            animation: scaleIn 0.3s ease-out;
        }

        .modal h2 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 20px;
        }

        .modal-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .score-summary {
            background: #f0f4ff;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .score-summary-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 2px solid #e0e7ff;
            font-size: 1.2rem;
        }

        .score-summary-item:last-child {
            border-bottom: none;
        }

        .score-summary-label {
            color: #666;
            font-weight: 600;
        }

        .score-summary-value {
            color: #667eea;
            font-weight: bold;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-btn {
            flex: 1;
            padding: 18px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal-btn.secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .modal-btn:hover {
            transform: scale(1.05);
        }

        .mute-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s;
            z-index: 1000;
        }

        .mute-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .hidden {
            display: none;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .flag-image {
                width: 100%;
                max-width: 320px;
                height: auto;
            }
            
            .lobby-screen, .game-screen, .settings-screen, .about-screen {
                padding: 30px 20px;
            }

            .lobby-screen h1 {
                font-size: 2.5rem;
            }

            .modal {
                padding: 30px 20px;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <button id="muteBtn" class="mute-btn" onclick="toggleMute()">üîä</button>
    
    <div class="container">
        <!-- Lobby Screen -->
        <div id="lobbyScreen" class="lobby-screen">
            <div class="globe-icon">üåç</div>
            <h1>Tebak Bendera Negara</h1>
            <p>Uji pengetahuan Anda tentang bendera negara-negara di dunia!</p>
            
            <div class="menu-buttons">
                <button class="menu-btn" onclick="startGame()">üéÆ Mulai Bermain</button>
                <button class="menu-btn secondary" onclick="showSettings()">‚öôÔ∏è Pengaturan</button>
                <button class="menu-btn secondary" onclick="showAbout()">‚ÑπÔ∏è Tentang</button>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settingsScreen" class="settings-screen hidden">
            <h2>‚öôÔ∏è Pengaturan</h2>
            
            <div class="setting-item">
                <h3>üéµ Volume Musik Latar</h3>
                <div class="volume-control">
                    <span>üîâ</span>
                    <input type="range" class="volume-slider" id="bgmVolume" min="0" max="100" value="30" onchange="updateBGMVolume(this.value)">
                    <span class="volume-value" id="bgmVolumeValue">30%</span>
                    <span>üîä</span>
                </div>
            </div>

            <div class="setting-item">
                <h3>üîî Volume Efek Suara</h3>
                <div class="volume-control">
                    <span>üîâ</span>
                    <input type="range" class="volume-slider" id="sfxVolume" min="0" max="100" value="60" onchange="updateSFXVolume(this.value)">
                    <span class="volume-value" id="sfxVolumeValue">60%</span>
                    <span>üîä</span>
                </div>
            </div>

            <button class="back-btn" onclick="backToLobby()">‚Üê Kembali</button>
        </div>

        <!-- About Screen -->
        <div id="aboutScreen" class="about-screen hidden">
            <h2>‚ÑπÔ∏è Tentang Game</h2>
            
            <div class="credits-box">
                <h3>üë®‚Äçüíª Tim Pengembang</h3>
                <p><strong>Ahmad Farid Zulkarnain</strong> (24020063)</p>
                <p><strong>Apriliano Hasta Asfirza</strong> (24020070)</p>
                <p><strong>Muhammad Rosyid</strong> (24020077)</p>
            </div>

            <div class="credits-box">
                <h3>üéÆ Tentang Game</h3>
                <p>Game edukasi untuk belajar mengenal bendera negara-negara di dunia.</p>
                <p><strong>Cara Bermain:</strong></p>
                <p>‚Ä¢ Lihat bendera yang ditampilkan</p>
                <p>‚Ä¢ Pilih nama negara yang tepat dari 4 pilihan</p>
                <p>‚Ä¢ Anda memiliki 3 nyawa ‚ù§Ô∏è</p>
                <p>‚Ä¢ Jawaban salah akan mengurangi 1 nyawa</p>
                <p>‚Ä¢ Game berakhir saat nyawa habis</p>
                <p>‚Ä¢ Raih skor dan streak setinggi-tingginya!</p>
            </div>

            <button class="back-btn" onclick="backToLobby()">‚Üê Kembali</button>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="game-screen hidden">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">‚ù§Ô∏è Nyawa</div>
                    <div class="lives-display" id="livesDisplay">
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                        <span class="heart">‚ù§Ô∏è</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Skor</div>
                    <div class="stat-value" style="color: #667eea;">
                        <span id="score">0</span>/<span id="total">0</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Akurasi</div>
                    <div class="stat-value" style="color: #10b981;" id="accuracy">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‚≠ê Streak</div>
                    <div class="stat-value" style="color: #f59e0b;" id="streak">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üèÜ Terbaik</div>
                    <div class="stat-value" style="color: #8b5cf6;" id="bestStreak">0</div>
                </div>
            </div>

            <div class="game-card">
                <h2 class="question-title">Bendera negara apa ini?</h2>
                
                <div class="flag-display">
                    <img id="flagImage" class="flag-image" src="" alt="Flag">
                    <div class="region-badge">Region: <span id="region"></span></div>
                </div>

                <div id="optionsGrid" class="options-grid"></div>

                <div id="feedback" class="feedback hidden"></div>

                <div class="action-buttons">
                    <button id="nextBtn" class="next-btn hidden" onclick="nextQuestion()">
                        Soal Berikutnya ‚Üí
                    </button>
                    <button class="reset-btn" onclick="returnToLobby()">
                        üè† Lobby
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-icon">üíÄ</div>
            <h2>Game Over!</h2>
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 20px;">Nyawa Anda habis!</p>
            
            <div class="score-summary">
                <div class="score-summary-item">
                    <span class="score-summary-label">Total Soal:</span>
                    <span class="score-summary-value" id="finalTotal">0</span>
                </div>
                <div class="score-summary-item">
                    <span class="score-summary-label">Benar:</span>
                    <span class="score-summary-value" id="finalScore">0</span>
                </div>
                <div class="score-summary-item">
                    <span class="score-summary-label">Akurasi:</span>
                    <span class="score-summary-value" id="finalAccuracy">0%</span>
                </div>
                <div class="score-summary-item">
                    <span class="score-summary-label">Streak Terbaik:</span>
                    <span class="score-summary-value" id="finalBestStreak">0</span>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="playAgain()">üîÑ Main Lagi</button>
                <button class="modal-btn secondary" onclick="backToLobbyFromModal()">üè† Lobby</button>
            </div>
        </div>
    </div>

    <script>
        // Game Data
        const countries = [
            { name: 'Indonesia', flag: 'bendera/id.png', region: 'Asia' },
            { name: 'Malaysia', flag: 'bendera/my.png', region: 'Asia' },
            { name: 'Singapura', flag: 'bendera/sg.png', region: 'Asia' },
            { name: 'Thailand', flag: 'bendera/th.png', region: 'Asia' },
            { name: 'Filipina', flag: 'bendera/ph.png', region: 'Asia' },
            { name: 'Vietnam', flag: 'bendera/vn.png', region: 'Asia' },
            { name: 'Jepang', flag: 'bendera/jp.png', region: 'Asia' },
            { name: 'Korea Selatan', flag: 'bendera/kr.png', region: 'Asia' },
            { name: 'China', flag: 'bendera/cn.png', region: 'Asia' },
            { name: 'India', flag: 'bendera/in.png', region: 'Asia' },
            { name: 'Amerika Serikat', flag: 'bendera/us.png', region: 'Amerika' },
            { name: 'Kanada', flag: 'bendera/ca.png', region: 'Amerika' },
            { name: 'Brazil', flag: 'bendera/br.png', region: 'Amerika' },
            { name: 'Argentina', flag: 'bendera/ar.png', region: 'Amerika' },
            { name: 'Meksiko', flag: 'bendera/mx.png', region: 'Amerika' },
            { name: 'Inggris', flag: 'bendera/gb.png', region: 'Eropa' },
            { name: 'Prancis', flag: 'bendera/fr.png', region: 'Eropa' },
            { name: 'Jerman', flag: 'bendera/de.png', region: 'Eropa' },
            { name: 'Italia', flag: 'bendera/it.png', region: 'Eropa' },
            { name: 'Spanyol', flag: 'bendera/es.png', region: 'Eropa' },
            { name: 'Belanda', flag: 'bendera/nl.png', region: 'Eropa' },
            { name: 'Rusia', flag: 'bendera/ru.png', region: 'Eropa' },
            { name: 'Turki', flag: 'bendera/tr.png', region: 'Eropa' },
            { name: 'Mesir', flag: 'bendera/eg.png', region: 'Afrika' },
            { name: 'Afrika Selatan', flag: 'bendera/za.png', region: 'Afrika' },
            { name: 'Nigeria', flag: 'bendera/ng.png', region: 'Afrika' },
            { name: 'Australia', flag: 'bendera/au.png', region: 'Oseania' },
            { name: 'Selandia Baru', flag: 'bendera/nz.png', region: 'Oseania' },
            { name: 'Arab Saudi', flag: 'bendera/sa.png', region: 'Asia' },
            { name: 'Uni Emirat Arab', flag: 'bendera/ae.png', region: 'Asia' }
        ];

        // Game State
        let score = 0;
        let total = 0;
        let streak = 0;
        let bestStreak = 0;
        let lives = 3;
        let currentQuestion = null;
        let isMuted = false;
        let showingAnswer = false;

        // Audio Elements
        let bgm, clickSound, correctSound, wrongSound, streakSound, gameOverSound;
        let bgmVolume = 0.3;
        let sfxVolume = 0.6;

        // Initialize Audio
        function initAudio() {
            bgm = new Audio('bgm/backsound.mp3');
            bgm.loop = true;
            bgm.volume = bgmVolume;

            clickSound = new Audio('bgm/click.mp3');
            clickSound.volume = sfxVolume * 0.8;

            correctSound = new Audio('bgm/benar.mp3');
            correctSound.volume = sfxVolume;

            wrongSound = new Audio('bgm/salah.mp3');
            wrongSound.volume = sfxVolume * 0.8;

            streakSound = new Audio('bgm/strike.mp3');
            streakSound.volume = sfxVolume;

            gameOverSound = new Audio('bgm/salah.mp3');
            gameOverSound.volume = sfxVolume;
        }

        function playSound(sound) {
            if (!isMuted && sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log('Audio play failed'));
            }
        }

        function toggleMute() {
            isMuted = !isMuted;
            document.getElementById('muteBtn').textContent = isMuted ? 'üîá' : 'üîä';
            if (bgm) {
                bgm.volume = isMuted ? 0 : bgmVolume;
            }
        }

        function updateBGMVolume(value) {
            bgmVolume = value / 100;
            document.getElementById('bgmVolumeValue').textContent = value + '%';
            if (bgm && !isMuted) {
                bgm.volume = bgmVolume;
            }
        }

        function updateSFXVolume(value) {
            sfxVolume = value / 100;
            document.getElementById('sfxVolumeValue').textContent = value + '%';
            if (clickSound) clickSound.volume = sfxVolume * 0.8;
            if (correctSound) correctSound.volume = sfxVolume;
            if (wrongSound) wrongSound.volume = sfxVolume * 0.8;
            if (streakSound) streakSound.volume = sfxVolume;
            if (gameOverSound) gameOverSound.volume = sfxVolume;
        }

        function showSettings() {
            playSound(clickSound);
            document.getElementById('lobbyScreen').classList.add('hidden');
            document.getElementById('settingsScreen').classList.remove('hidden');
        }

        function showAbout() {
            playSound(clickSound);
            document.getElementById('lobbyScreen').classList.add('hidden');
            document.getElementById('aboutScreen').classList.remove('hidden');
        }

        function backToLobby() {
            playSound(clickSound);
            document.getElementById('settingsScreen').classList.add('hidden');
            document.getElementById('aboutScreen').classList.add('hidden');
            document.getElementById('lobbyScreen').classList.remove('hidden');
        }

        function startGame() {
            playSound(clickSound);
            initAudio();
            
            document.getElementById('lobbyScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            score = 0;
            total = 0;
            streak = 0;
            lives = 3;
            
            updateStats();
            updateLivesDisplay();
            generateQuestion();
            
            if (bgm && !isMuted) {
                bgm.play().catch(e => console.log('BGM play failed'));
            }
        }